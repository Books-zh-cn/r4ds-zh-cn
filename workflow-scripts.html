<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund">
<title>6&nbsp; Workflow: scripts and projects – R for Data Science (2e)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-import.html" rel="next">
<link href="./data-tidy.html" rel="prev">
<link href="./cover.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-eb9c1cd88989e0a3f246f30c817c5ce3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script defer="" data-domain="r4ds.hadley.nz" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./whole-game.html">Whole game</a></li><li class="breadcrumb-item"><a href="./workflow-scripts.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Workflow: scripts and projects</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for Data Science (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ZhengTiger/r4ds-zh-cn" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface-2e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the second edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Whole game</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Workflow: basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data transformation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-style.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Workflow: code style</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data tidying</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-scripts.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Workflow: scripts and projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data import</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow-help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Workflow: getting help</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./visualize.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualize</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Layers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Exploratory data analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Communication</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transform</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logicals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Logical vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./numbers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Numbers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regexps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Regular expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datetimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Dates and times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./missing-values.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Missing values</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Joins</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Import</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Spreadsheets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./arrow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Arrow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rectangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Hierarchical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Web scraping</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./program.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Program</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Iteration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./base-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">A field guide to base R</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./communicate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communicate</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Quarto formats</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#scripts" id="toc-scripts" class="nav-link active" data-scroll-target="#scripts"><span class="header-section-number">6.1</span> Scripts</a>
  <ul class="collapse">
<li><a href="#running-code" id="toc-running-code" class="nav-link" data-scroll-target="#running-code"><span class="header-section-number">6.1.1</span> Running code</a></li>
  <li><a href="#rstudio-diagnostics" id="toc-rstudio-diagnostics" class="nav-link" data-scroll-target="#rstudio-diagnostics"><span class="header-section-number">6.1.2</span> RStudio diagnostics</a></li>
  <li><a href="#saving-and-naming" id="toc-saving-and-naming" class="nav-link" data-scroll-target="#saving-and-naming"><span class="header-section-number">6.1.3</span> Saving and naming</a></li>
  </ul>
</li>
  <li>
<a href="#projects" id="toc-projects" class="nav-link" data-scroll-target="#projects"><span class="header-section-number">6.2</span> Projects</a>
  <ul class="collapse">
<li><a href="#what-is-the-source-of-truth" id="toc-what-is-the-source-of-truth" class="nav-link" data-scroll-target="#what-is-the-source-of-truth"><span class="header-section-number">6.2.1</span> What is the source of truth?</a></li>
  <li><a href="#where-does-your-analysis-live" id="toc-where-does-your-analysis-live" class="nav-link" data-scroll-target="#where-does-your-analysis-live"><span class="header-section-number">6.2.2</span> Where does your analysis live?</a></li>
  <li><a href="#rstudio-projects" id="toc-rstudio-projects" class="nav-link" data-scroll-target="#rstudio-projects"><span class="header-section-number">6.2.3</span> RStudio projects</a></li>
  <li><a href="#relative-and-absolute-paths" id="toc-relative-and-absolute-paths" class="nav-link" data-scroll-target="#relative-and-absolute-paths"><span class="header-section-number">6.2.4</span> Relative and absolute paths</a></li>
  </ul>
</li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">6.3</span> Exercises</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">6.4</span> Summary</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/ZhengTiger/r4ds-zh-cn/edit/main/workflow-scripts.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ZhengTiger/r4ds-zh-cn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./whole-game.html">Whole game</a></li><li class="breadcrumb-item"><a href="./workflow-scripts.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Workflow: scripts and projects</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-workflow-scripts-projects" class="quarto-section-identifier"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Workflow: scripts and projects</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="status">
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>You are reading the work-in-progress second edition of R for Data Science. This chapter is largely complete and just needs final proof reading. You can find the complete first edition at <a href="https://r4ds.had.co.nz" class="uri">https://r4ds.had.co.nz</a>.</p>
</div>
</div>
</div>
</div>
<p>本章将向您介绍组织代码的两个基本工具：脚本（scripts）和项目（projects）。</p>
<section id="scripts" class="level2" data-number="6.1"><h2 data-number="6.1" class="anchored" data-anchor-id="scripts">
<span class="header-section-number">6.1</span> Scripts</h2>
<p>到目前为止，您已经使用控制台（console）来运行代码。 这是一个很好的起点，但是当您创建更复杂的 ggplot2 图形和更长的 dplyr 管道时，您会发现它很快就会变得拥挤。 为了给自己更多的工作空间，请使用脚本编辑器。 单击 File 菜单，选择 New File，然后选择 R script，或使用键盘快捷键 Cmd/Ctrl + Shift + N 将其打开。 现在您将看到四个窗格，如 <a href="#fig-rstudio-script" class="quarto-xref">Figure&nbsp;<span>6.1</span></a> 所示。 脚本编辑器是试验代码的好地方。 当您想要更改某些内容时，不必重新输入整个内容，只需编辑脚本并重新运行即可。 一旦您编写了可以运行并执行您想要的操作的代码，您就可以将其保存为脚本文件，以便稍后轻松返回。</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-rstudio-script" class="quarto-float quarto-figure quarto-figure-center anchored" alt="RStudio IDE with Editor, Console, and Output highlighted.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-rstudio-script-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="diagrams/rstudio/script.png" class="img-fluid figure-img" alt="RStudio IDE with Editor, Console, and Output highlighted." width="521">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rstudio-script-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: 打开脚本编辑器会在 IDE 的左上角添加一个新窗格。
</figcaption></figure>
</div>
</div>
</div>
<section id="running-code" class="level3" data-number="6.1.1"><h3 data-number="6.1.1" class="anchored" data-anchor-id="running-code">
<span class="header-section-number">6.1.1</span> Running code</h3>
<p>脚本编辑器是构建复杂 ggplot2 绘图或长序列 dplyr 操作的绝佳场所。 有效使用脚本编辑器的关键是记住最重要的键盘快捷键之一：Cmd/Ctrl + Enter。 这将在控制台中执行当前的 R 表达式。 例如，采用下面的代码。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay)█, <span class="sc">!</span><span class="fu">is.na</span>(arr_delay))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>如果光标位于 █ 处，按 Cmd/Ctrl + Enter 将运行生成 <code>not_cancelled</code> 的完整命令。 它还会将光标移动到以下语句（以 <code>not_cancelled |&gt;</code> 开头）。 这样可以通过重复按 Cmd/Ctrl + Enter 轻松地逐步执行完整的脚本。</p>
<p>您还可以使用 Cmd/Ctrl + Shift + S 一步执行完整的脚本，而不是逐个表达式地运行代码。 定期执行此操作是确保您捕获脚本中代码的所有重要部分的好方法。</p>
<p>我们建议您始终使用所需的包来启动脚本。 这样，如果您与其他人共享代码，他们可以轻松查看需要安装哪些软件包。 但请注意，您绝对不应该在共享的脚本中包含 <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>。 如果他们不小心的话，交出一个会改变他们计算机上某些内容的脚本是不体贴的！</p>
<p>在学习后续章节时，我们强烈建议从脚本编辑器开始并练习键盘快捷键。 随着时间的推移，以这种方式向控制台发送代码将变得如此自然，您甚至不会想到它。</p>
</section><section id="rstudio-diagnostics" class="level3" data-number="6.1.2"><h3 data-number="6.1.2" class="anchored" data-anchor-id="rstudio-diagnostics">
<span class="header-section-number">6.1.2</span> RStudio diagnostics</h3>
<p>在脚本编辑器中，RStudio 将使用红色波浪线和侧边栏中的十字来突出显示语法错误：</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="screenshots/rstudio-diagnostic.png" class="img-fluid figure-img" alt="Script editor with the script x y <- 10. A red X indicates that there is syntax error. The syntax error is also highlighted with a red squiggly line." width="148"></p>
</figure>
</div>
</div>
</div>
<p>将鼠标悬停在十字上即可查看问题所在：</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="screenshots/rstudio-diagnostic-tip.png" class="img-fluid figure-img" alt="Script editor with the script x y <- 10. A red X indicates that there is syntax error. The syntax error is also highlighted with a red squiggly line. Hovering over the X shows a text box with the text unexpected token y and unexpected token <-." width="232"></p>
</figure>
</div>
</div>
</div>
<p>RStudio 还会让您了解潜在的问题：</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="screenshots/rstudio-diagnostic-warn.png" class="img-fluid figure-img" alt="Script editor with the script 3 == NA. A yellow exclamation mark indicates that there may be a potential problem. Hovering over the exclamation mark shows a text box with the text use is.na to check whether expression evaluates to NA." width="439"></p>
</figure>
</div>
</div>
</div>
</section><section id="saving-and-naming" class="level3" data-number="6.1.3"><h3 data-number="6.1.3" class="anchored" data-anchor-id="saving-and-naming">
<span class="header-section-number">6.1.3</span> Saving and naming</h3>
<p>当您退出时，RStudio 会自动保存脚本编辑器的内容，并在您重新打开时自动重新加载。 尽管如此，最好避免使用 Untitled1、Untitled2、Untitled3 等，而是保存脚本并为它们提供信息丰富的名称。</p>
<p>将文件命名为 <code>code.R</code> 或 <code>myscript.R</code> 可能很诱人，但在为文件选择名称之前应该仔细考虑一下。 文件命名的三个重要原则如下：</p>
<ol type="1">
<li>文件名应该是机器可读的（<strong>machine</strong> readable）：避免空格、符号和特殊字符。不要依靠大小写来区分文件。</li>
<li>文件名应该是人类可读的（<strong>human</strong> readable）：使用文件名来描述文件中的内容。</li>
<li>文件名应该与默认顺序配合良好：以数字开头的文件名，以便按字母顺序排序将它们按照使用的顺序排列。</li>
</ol>
<p>例如，假设项目文件夹中有以下文件。</p>
<pre><code>alternative model.R
code for exploratory analysis.r
finalreport.qmd
FinalReport.qmd
fig 1.png
Figure_02.png
model_first_try.R
run-first.r
temp.txt</code></pre>
<p>这里存在各种各样的问题：很难找到先运行哪个文件、文件名包含空格、有两个同名但大小写不同的文件（<code>finalreport</code> vs.&nbsp;<code>FinalReport</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>）、有些名称没有描述其内容（<code>run-first</code> and <code>temp</code>）。</p>
<p>这是命名和组织同一组文件的更好方法：</p>
<pre><code>01-load-data.R
02-exploratory-analysis.R
03-model-approach-1.R
04-model-approach-2.R
fig-01.png
fig-02.png
report-2022-03-20.qmd
report-2022-04-02.qmd
report-draft-notes.txt</code></pre>
<p>对关键脚本进行编号可以清楚地显示运行它们的顺序，并且一致的命名方案可以更容易地看到差异。 此外，数字的标签类似，报告通过文件名中包含的日期进行区分，并且 <code>temp</code> 被重命名为 <code>report-draft-notes</code> 以更好地描述其内容。 如果一个目录中有很多文件，建议进一步组织，将不同类型的文件（scripts, figures, etc.）放在不同的目录中。</p>
</section></section><section id="projects" class="level2" data-number="6.2"><h2 data-number="6.2" class="anchored" data-anchor-id="projects">
<span class="header-section-number">6.2</span> Projects</h2>
<p>有一天，您需要退出 R，去做其他事情，然后再返回分析。 有一天，您将同时进行多项分析，并且希望将它们分开。 有一天，您需要将外部世界的数据引入 R，并将 R 中的数值结果和数字发送回外部世界。</p>
<p>为了处理这些现实生活中的情况，您需要做出两个决定：</p>
<ol type="1">
<li><p>真实来源是什么？ 您将保存什么作为所发生事件的永久记录？</p></li>
<li><p>您的分析在哪里？</p></li>
</ol>
<section id="what-is-the-source-of-truth" class="level3" data-number="6.2.1"><h3 data-number="6.2.1" class="anchored" data-anchor-id="what-is-the-source-of-truth">
<span class="header-section-number">6.2.1</span> What is the source of truth?</h3>
<p>作为初学者，可以依赖当前的环境来包含您在分析过程中创建的所有对象。 但是，为了更轻松地处理大型项目或与其他人协作，您的真实来源应该是 R scripts。 使用 R scripts（和数据文件），您可以重新创建环境。 仅在您的环境中，重新创建 R scripts 要困难得多：您要么必须从内存中重新输入大量代码（一路上不可避免地会犯错误），要么必须仔细挖掘您的 R history。</p>
<p>为了帮助将 R scripts 保留为分析的真实来源，我们强烈建议您指示 RStudio 不要在会话之间保留工作区。 您可以通过运行 <code><a href="https://usethis.r-lib.org/reference/use_blank_slate.html">usethis::use_blank_slate()</a></code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> 或 <a href="#fig-blank-slate" class="quarto-xref">Figure&nbsp;<span>6.2</span></a> 中所示的选项来完成此操作。 这会给您带来一些短期的痛苦，因为现在当您重新启动 RStudio 时，它将不再记住您上次运行的代码，也不会再使用您创建的对象或读取的数据集。 但这种短期的痛苦可以避免长期的痛苦，因为它迫使您捕获代码中的所有重要过程。 没有什么比三个月后发现您只将重要计算的结果存储在环境中，而不是计算本身存储在代码中更糟糕的了。</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-blank-slate" class="quarto-float quarto-figure quarto-figure-center anchored" alt="RStudio Global Options window where the option Restore .RData into workspace at startup is not checked. Also, the option Save workspace to .RData on exit is set to Never. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-blank-slate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="diagrams/rstudio/clean-slate.png" class="img-fluid figure-img" alt="RStudio Global Options window where the option Restore .RData into workspace at startup is not checked. Also, the option Save workspace to .RData on exit is set to Never. " width="523">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-blank-slate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.2: 将这些选项复制到你的 RStudio 选项中，以便始终从头开始启动 RStudio 会话。
</figcaption></figure>
</div>
</div>
</div>
<p>有一对很棒的键盘快捷键可以协同工作，以确保您在编辑器中捕获了代码的重要部分：</p>
<ol type="1">
<li>按 Cmd/Ctrl + Shift + 0/F10 重新启动 R。</li>
<li>按 Cmd/Ctrl + Shift + S 重新运行当前脚本。</li>
</ol>
<p>我们每周都会使用这种模式数百次。</p>
<p>或者，如果您不使用键盘快捷键，则可以转到 Session &gt; Restart R，然后突出显示并重新运行当前脚本。</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
RStudio server
</div>
</div>
<div class="callout-body-container callout-body">
<p>如果您使用 RStudio server，默认情况下您的 R 会话永远不会重新启动。 当您关闭 RStudio server 选项卡时，可能感觉您正在关闭 R，但服务器实际上让它在后台运行。 下次您返回时，您将位于与离开时完全相同的位置。 这使得定期重新启动 R 变得更加重要，这样您才能从头开始。</p>
</div>
</div>
</section><section id="where-does-your-analysis-live" class="level3" data-number="6.2.2"><h3 data-number="6.2.2" class="anchored" data-anchor-id="where-does-your-analysis-live">
<span class="header-section-number">6.2.2</span> Where does your analysis live?</h3>
<p>R 有一个强大的工作目录（<strong>working directory</strong>）概念。 这是 R 查找您要求其加载的文件的位置，也是放置您要求其保存的任何文件的位置。 RStudio 在控制台顶部显示您当前的工作目录：</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="screenshots/rstudio-wd.png" class="img-fluid figure-img" alt="The Console tab shows the current working directory as ~/Documents/r4ds. " width="321"></p>
</figure>
</div>
</div>
</div>
<p>您可以通过运行 <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> 在 R 代码中打印出来：</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/Users/hadley/Documents/r4ds"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>在此 R 会话中，当前工作目录（将其视为”home”）位于 hadley 的 Documents 文件夹中名为 r4ds 的子文件夹中。 当您运行此代码时，它会返回不同的结果，因为您的计算机的目录结构与 Hadley 的不同！</p>
<p>作为 R 初学者，可以将工作目录设置为主目录、文档目录或计算机上任何其他奇怪的目录。 但你已经读了这本书的七章，并且你不再是初学者了。 很快您就应该将项目组织到目录中，并且在处理项目时将 R 的工作目录设置为关联的目录。</p>
<p>您可以在 R 中设置工作目录，但我们不推荐这样做：</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"/path/to/my/CoolProject"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>有一个更好的方法；这种方式还可以让您像专家一样管理您的 R 工作。 就是 <strong>RStudio</strong> <strong>project</strong>。</p>
</section><section id="rstudio-projects" class="level3" data-number="6.2.3"><h3 data-number="6.2.3" class="anchored" data-anchor-id="rstudio-projects">
<span class="header-section-number">6.2.3</span> RStudio projects</h3>
<p>将与给定项目关联的所有文件（input data, R scripts, analytical results, and figures）保存在一个目录中是一种明智且常见的做法，RStudio 通过项目（<strong>projects</strong>）对此提供了内置支持。 让我们创建一个 project 供您在学习本书其余部分时使用。 单击 File &gt; New Project，然后按照 <a href="#fig-new-project" class="quarto-xref">Figure&nbsp;<span>6.3</span></a> 中所示的步骤操作。</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-new-project" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Three screenshots of the New Project menu. In the first screenshot, the Create Project window is shown and New Directory is selected. In the second screenshot, the Project Type window is shown and Empty Project is selected. In the third screenshot, the Create New Project  window is shown and the directory name is given as r4ds and the project is being created as subdirectory of the Desktop. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-new-project-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="diagrams/new-project.png" class="img-fluid figure-img" alt="Three screenshots of the New Project menu. In the first screenshot, the Create Project window is shown and New Directory is selected. In the second screenshot, the Project Type window is shown and Empty Project is selected. In the third screenshot, the Create New Project  window is shown and the directory name is given as r4ds and the project is being created as subdirectory of the Desktop. " width="1172">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-new-project-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.3: 要创建 new project：（top）首先单击 New Directory，然后（middle）单击 Create Project，然后（bottom）填写目录（project）名称，选择一个好的子目录作为其主目录，然后单击 Create Project。
</figcaption></figure>
</div>
</div>
</div>
<p>将您的项目命名为 <code>r4ds</code>，并仔细考虑将项目放在哪个子目录中。 如果您不将其存储在合理的地方，将来将很难找到它！</p>
<p>此过程完成后，您将获得一个专门用于本书的新 RStudio 项目。 检查项目的 “home” 是否是当前工作目录：</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] /Users/hadley/Documents/r4ds</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>现在在脚本编辑器中输入以下命令，然后保存文件，将其命名为 “diamonds.R”。 然后，创建一个名为 “data” 的新文件夹。 您可以通过单击 RStudio Files 窗格中的 “New Folder” 按钮来完成此操作。 最后，运行完整的脚本，将 PNG 和 CSV 文件保存到您的项目目录中。 不用担心细节，你会在本书后面学到它们。</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"diamonds.png"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="st">"data/diamonds.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>退出 RStudio。 检查与您的项目关联的文件夹 — 注意 <code>.Rproj</code> 文件。 双击该文件以重新打开该项目。 请注意，您回到了上次离开的位置：它是相同的工作目录和命令历史记录，并且您正在处理的所有文件仍然打开。 然而，由于您遵循了我们上面的说明，因此您将拥有一个全新的环境，保证您从头开始。</p>
<p>以您最喜欢的特定于操作系统的方式，在计算机中搜索 <code>diamonds.png</code>，您会找到 PNG（毫不奇怪），而且还会找到创建它的脚本（<code>diamonds.R</code>）。 这是一个巨大的胜利！ 有一天，您会想要重新制作一个人物，或者只是想了解它的来源。 如果您使用 R 代码严格地将图形保存到文件中，而不是使用鼠标或剪贴板，那么您将能够轻松地重现旧作品！</p>
</section><section id="relative-and-absolute-paths" class="level3" data-number="6.2.4"><h3 data-number="6.2.4" class="anchored" data-anchor-id="relative-and-absolute-paths">
<span class="header-section-number">6.2.4</span> Relative and absolute paths</h3>
<p>一旦进入项目，您应该只使用相对路径而不是绝对路径。 有什么不同？ 相对路径是相对于工作目录的，即项目的主目录。 当 Hadley 在上面写入 <code>data/diamonds.csv</code> 时，它是 <code>/Users/hadley/Documents/r4ds/data/diamonds.csv</code> 的快捷方式。 但重要的是，如果 Mine 在她的计算机上运行此代码，它将指向 <code>/Users/Mine/Documents/r4ds/data/diamonds.csv</code>。 这就是为什么相对路径很重要：无论 R 项目文件夹位于何处，它们都会起作用。</p>
<p>无论您的工作目录如何，绝对路径都指向同一位置。 根据您的操作系统，它们看起来略有不同。 在 Windows 上，它们以驱动器号（例如 <code>C:</code>）或两个反斜杠（例如 <code>\\servername</code>）开头，在 Mac/Linux 上，它们以斜杠”/“开头（例如 <code>/users/hadley</code>）。 您永远不应该在脚本中使用绝对路径，因为它们会妨碍共享：其他人不会拥有与您完全相同的目录配置。</p>
<p>操作系统之间还有另一个重要的区别：如何分离路径的组成部分。 Mac 和 Linux 使用斜杠（例如 <code>data/diamonds.csv</code>），Windows 使用反斜杠（例如 <code>data\diamonds.csv</code>）。 R 可以使用任何一种类型（无论您当前使用什么平台），但不幸的是，反斜杠对 R 来说意味着一些特殊的东西，并且要在路径中获得单个反斜杠，您需要键入两个反斜杠！ 这让生活变得令人沮丧，因此我们建议始终使用带有正斜杠的 Linux/Mac 风格。</p>
</section></section><section id="exercises" class="level2" data-number="6.3"><h2 data-number="6.3" class="anchored" data-anchor-id="exercises">
<span class="header-section-number">6.3</span> Exercises</h2>
<ol type="1">
<li><p>转到 RStudio Tips Twitter account，<a href="https://twitter.com/rstudiotips" class="uri">https://twitter.com/rstudiotips</a> 并找到一个看起来有趣的提示。 练习使用它！</p></li>
<li><p>RStudio 诊断还会报告哪些其他常见错误？ 阅读 <a href="https://support.posit.co/hc/en-us/articles/205753617-Code-Diagnostics" class="uri">https://support.posit.co/hc/en-us/articles/205753617-Code-Diagnostics</a> 找出。</p></li>
</ol></section><section id="summary" class="level2" data-number="6.4"><h2 data-number="6.4" class="anchored" data-anchor-id="summary">
<span class="header-section-number">6.4</span> Summary</h2>
<p>在本章中，您学习了如何在 scripts (files) 和 projects (directories) 中组织 R 代码。 就像代码风格一样，一开始这可能感觉像是在忙活。 但是，当您在多个项目中积累更多代码时，您将学会欣赏一点预先的组织如何可以为您节省大量时间。</p>
<p>总之，scripts 和 projects 为您提供了可靠的工作流程，将在未来为您提供良好的服务：</p>
<ul>
<li>为每个数据分析项目创建一个 RStudio project。</li>
<li>将脚本（具有信息丰富的名称）保存在项目中，对其进行编辑，部分或整体运行它们。经常重新启动 R 以确保您已捕获脚本中的所有内容。</li>
<li>只使用相对路径，而不是绝对路径。</li>
</ul>
<p>然后，您需要的所有内容都集中在一处，并与您正在处理的所有其他项目完全分开。</p>
<p>到目前为止，我们已经使用了 R 包中捆绑的数据集。 这样可以更轻松地对预先准备的数据进行一些练习，但显然您的数据无法以这种方式获得。 因此，在下一章中，您将学习如何使用 readr 包将数据从磁盘加载到 R 会话中。</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Not to mention that you’re tempting fate by using “final” in the name 😆 The comic Piled Higher and Deeper has a <a href="https://phdcomics.com/comics/archive.php?comicid=1531">fun strip on this</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If you don’t have usethis installed, you can install it with <code>install.packages("usethis")</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ZhengTiger\.github\.io\/r4ds-zh-cn\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./data-tidy.html" class="pagination-link" aria-label="Data tidying">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data tidying</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-import.html" class="pagination-link" aria-label="Data import">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data import</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>R for Data Science (2e) was written by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ZhengTiger/r4ds-zh-cn/edit/main/workflow-scripts.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ZhengTiger/r4ds-zh-cn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>